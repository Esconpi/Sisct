@model IEnumerable<Escon.SisctNET.Model.DarDocument>

@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="box box-primary">
    <div class="box-header">
        <div class="box-title">
            Filtrar Documentos Dar
        </div>
    </div>

    <div class="box-body">
        <div class="col-md-12">
            <div class="form-group col-lg-2 col-md-2 col-xs-12">
                <label class="control-label">Situação</label>
                <select class="form-control">
                    <option>Todos</option>
                    <option>Ativos</option>
                    <option>Cancelados</option>
                </select>
            </div>

            <div class="form-group col-lg-2 col-md-2 col-xs-12">
                <label class="control-label">Situação Pgto</label>
                <select class="form-control">
                    <option>Todos</option>
                    <option>Pagos</option>
                    <option>Não Pagos</option>
                </select>
            </div>

            <div class="form-group col-lg-2 col-md-2 col-xs-12">
                <label class="control-label">Perído de Referência</label>
                <select class="form-control">
                    <option>01-2020</option>
                    <option>02-2020</option>
                    <option>03-2020</option>
                </select>
            </div>

            <div class="form-group col-lg-2 col-md-2 col-xs-12">
                <label class="control-label">Dar</label>
                <select class="form-control">
                    <option>Todos</option>
                    <option>Ativos</option>
                    <option>Cancelados</option>
                </select>
            </div>

            <div class="form-group col-lg-1 col-md-1 col-xs-12">
                <label class="control-label">&nbsp;</label>
                <button type="button" class="form-control btn btn-primary" value="Filtrar">
                    <i class="fa fa-search"></i>
                    Filtrar
                </button>
            </div>

        </div>
    </div>

</div>

<div class="box box-primary">
    <div class="box-header">
        <div class="box-title">
            Resultado da Busca
        </div>
    </div>

    <div class="box-body">
        <div style="width:100%; overflow:hidden; overflow-x:scroll; padding:20px;">

            <table class="table table-striped table-bordered" id="tblIndex" style="width:100%">
                <thead>
                    <tr>
                        <th>
                            Id
                        </th>
                        <th>
                            Número Controle
                        </th>
                        <th>
                            Número Documento
                        </th>
                        <th>
                            Dar
                        </th>
                        <th>
                            Empresa
                        </th>
                        <th>
                            Período Referência
                        </th>
                        <th>
                            Vencimento
                        </th>
                        <th>
                            Cancelado
                        </th>
                        <th>
                            Pago
                        </th>
                        <th></th>
                    </tr>
                </thead>

                <tbody>
                    @foreach (var item in Model)
                    {
                        <tr>
                            <td>
                                @item.Id
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.ControlNumber)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.DocumentNumber)
                            </td>

                            <td>
                                @Html.DisplayFor(modelItem => item.Dar.Code)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.Company.FantasyName)
                            </td>
                            <td>
                                @string.Format("{0}-{1}", item.PeriodReference.ToString().Substring(4, 2), item.PeriodReference.ToString().Substring(0, 4))
                            </td>
                            <td>
                                @item.DueDate.ToString("dd/MM/yyyy")
                            </td>
                            <td style="text-align:center">
                                @Html.DisplayFor(modelItem => item.Canceled)
                            </td>
                            <td style="text-align:center">
                                @Html.DisplayFor(modelItem => item.PaidOut)
                            </td>
                            <td style="width:50px;">
                                <a href='/Billets/@(item.BilletPath)' target='blank'><i class='fa fa-download'></i></a>
                                &nbsp;&nbsp;
                                @if (!item.Canceled)
                                {
                                    <a style="cursor:pointer;" class="btnSendBillet" data-billet="@(item.Id)">
                                        <i class="fa fa-send"></i>
                                    </a>
                                }

                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>

</div>
<script src="~/app/billetDar.js"></script>
